<!doctype html>
<html ng-app="securityGuardGame">
  <head>
    <title>Angular Security Guard</title>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
    <script src="controllers.js"></script>
    <style>
      table, th, td { border: 1px solid black; }
    </style>
  </head>
  <body>
    <h1>Angular Security Guard</h1>

      <p>An attempt to implement game logic similar to <a href="https://en.wikipedia.org/wiki/Five_Nights_at_Freddy%27s">Five Nights at Freddy's</a> with AngularJS to practice data binding and views.</p>
      <p>Currently there is no user interface aside from refreshing or leaving the page. The timer counts seconds, and each second each enemy may move depending on its program. If an enemy reaches the security office it may stick around a few seconds, then it will go backstage, then either continue wandering or go back to its original position if backstage isn't on its movement possibilities. Power never changes. Not all locations are used.</p>

    <div ng-controller="gameState">

      <svg xmlns="http://www.w3.org/2000/svg">
        <g transform="translate(100,100)">
          <circle r="10" cx="-15" cy="-15"></circle>
          <circle r="10" cx="15" cy="-15"></circle>
          <circle r="20"></circle>
        </g>
        <g transform="translate(150,100)">
          <polygon transform = "translate(-15,-18) rotate(-40)" points="-10,9 10,9 0,-12"></polygon>
          <polygon transform = "translate(15,-18) rotate(40)" points="-10,9 10,9 0,-12"></polygon>
          <circle r="20"></circle>
        </g>
        <g transform="translate(200,100)">
          <ellipse rx="5" ry="20" transform="translate(-10,-20) rotate(-10)"></ellipse>
          <ellipse rx="5" ry="20" transform="translate(10,-20) rotate(10)"></ellipse>
          <circle r="20"></circle>
        </g>
        <g transform="translate(250,100)">
          <ellipse rx="2" ry="10" transform="translate(0,-20)"></ellipse>
          <ellipse rx="2" ry="10" transform="translate(-5,-20) rotate(-45)"></ellipse>
          <ellipse rx="2" ry="10" transform="translate(5,-20) rotate(45)"></ellipse>
          <circle r="20"></circle>
        </g>
      </svg>

      <h2>Resources</h2>

      <div>Time: {{ time }}</div>
      <div>Power: {{ power }}</div>

      <div ng-show="debug == true">
        <h2>View Status</h2>
  
        <table>
          <thead>
            <tr>
              <th>View</th>
              <th>Type</th>
              <th>Room</th>
              <th>Location Name</th>
              <th>Location ID</th>
              <th>Enemies Present</th>
            </tr>
          </thead>
          <tbody ng-repeat="view in views">
            <tr ng-repeat="loc in view.location">
              <td ng-if="$index == 0" rowspan="{{ view.location.length }}">{{ view.name }}</td>
              <td ng-if="$index == 0" rowspan="{{ view.location.length }}">{{ view.type }}</td>
              <td ng-if="$index == 0" rowspan="{{ view.location.length }}">{{ view.room }}</td>
              <td>{{ loc.name }}</td>
              <td>{{ loc.locId }}</td>
              <td><span ng-repeat="enemy in enemies" ng-show="enemy.location == loc.locId">{{ enemy.name }} </span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
